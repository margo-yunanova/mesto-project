(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}t.d({},{h:()=>Vt});var r=new WeakSet,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}(this,r),this.options=e}var o,a;return o=t,(a=[{key:"getProfile",value:function(){return fetch("".concat(this.options.baseUrl,"/users/me"),{headers:this.options.headers}).then(n(this,r,i))}},{key:"getInitialCards",value:function(){return fetch("".concat(this.options.baseUrl,"/cards"),{headers:this.options.headers}).then(n(this,r,i))}},{key:"pushProfileUpdate",value:function(t,e){return fetch("".concat(this.options.baseUrl,"/users/me"),{method:"PATCH",headers:this.options.headers,body:JSON.stringify({name:t,about:e})}).then(n(this,r,i))}},{key:"pushNewPlaceCard",value:function(t,e){return fetch("".concat(this.options.baseUrl,"/cards"),{method:"POST",headers:this.options.headers,body:JSON.stringify({name:t,link:e})}).then(n(this,r,i))}},{key:"deletePlaceCard",value:function(t){return fetch("".concat(this.options.baseUrl,"/cards/").concat(t),{method:"DELETE",headers:this.options.headers}).then(n(this,r,i))}},{key:"likeCard",value:function(t){return fetch("".concat(this.options.baseUrl,"/cards/likes/").concat(t),{method:"PUT",headers:this.options.headers}).then(n(this,r,i))}},{key:"deleteLikeCard",value:function(t){return fetch("".concat(this.options.baseUrl,"/cards/likes/").concat(t),{method:"DELETE",headers:this.options.headers}).then(n(this,r,i))}},{key:"updateUserPic",value:function(t){return fetch("".concat(this.options.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.options.headers,body:JSON.stringify({avatar:t})}).then(n(this,r,i))}}])&&e(o.prototype,a),Object.defineProperty(o,"prototype",{writable:!1}),t}();function i(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}var a=document.querySelector(".page"),c=a.querySelector(".profile__edit-button"),s=a.querySelector(".profile__add-button");function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){p(t,e),e.add(t)}function f(t,e,n){p(t,e),e.set(t,n)}function p(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,v(t,e,"get"))}function y(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function d(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,v(t,e,"set"),n),n}function v(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var b,m,w,g=new WeakMap,S=new WeakMap,_=new WeakMap,k=new WeakMap,O=new WeakMap,E=new WeakMap,j=new WeakMap,C=new WeakMap,P=new WeakMap,L=new WeakMap,T=new WeakSet,q=new WeakSet,I=new WeakSet,W=new WeakSet,A=new WeakSet,U=new WeakSet,x=new WeakSet,R=new WeakSet,M=new WeakSet,B=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,M),l(this,R),l(this,x),l(this,U),l(this,A),l(this,W),l(this,I),l(this,q),l(this,T),f(this,g,{writable:!0,value:sessionStorage.getItem("userId")}),f(this,S,{writable:!0,value:void 0}),f(this,_,{writable:!0,value:void 0}),f(this,k,{writable:!0,value:void 0}),f(this,O,{writable:!0,value:void 0}),f(this,E,{writable:!0,value:void 0}),f(this,j,{writable:!0,value:void 0}),f(this,C,{writable:!0,value:void 0}),f(this,P,{writable:!0,value:void 0}),f(this,L,{writable:!0,value:void 0}),d(this,S,e),d(this,_,n),d(this,k,r)}var e,n;return e=t,(n=[{key:"create",value:function(){return y(this,T,D).call(this),h(this,E).textContent=h(this,S).name,h(this,j).src=h(this,S).link,h(this,j).alt=h(this,S).name,y(this,U,$).call(this,y(this,A,J).call(this,h(this,S))),y(this,R,H).call(this,h(this,S))&&y(this,x,F).call(this),y(this,W,V).call(this),h(this,O)}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(){d(this,O,document.querySelector(h(this,_)).content.querySelector(this.constructor.cardTypeSelector).cloneNode(!0)),d(this,E,h(this,O).querySelector(".place__title")),d(this,j,h(this,O).querySelector(".place__image")),d(this,C,h(this,O).querySelector(".place__icon-like")),d(this,P,h(this,O).querySelector(".place__like-counter")),d(this,L,h(this,O).querySelector(".place__icon-trash"))}function z(){var t=this;(h(this,C).classList.contains("place__icon-like_active")?Vt.deleteLikeCard(h(this,S)._id):Vt.likeCard(h(this,S)._id)).then((function(e){y(t,U,$).call(t,y(t,A,J).call(t,e)),y(t,x,F).call(t)})).catch((function(t){console.log(t)}))}function N(){var t=this;Vt.deletePlaceCard(h(this,S)._id).then((function(){y(t,M,G).call(t)})).catch((function(t){console.log(t)}))}function V(){var t=this;h(this,S).owner._id===h(this,g)?h(this,L).addEventListener("click",(function(){y(t,I,N).call(t)})):h(this,L).remove(),h(this,C).addEventListener("click",(function(){y(t,q,z).call(t)})),h(this,j).addEventListener("click",(function(){h(t,k).call(t,h(t,j).src,h(t,E).textContent)}))}function J(t){return t.likes.length}function $(t){h(this,P).textContent=t}function F(){h(this,C).classList.toggle("place__icon-like_active")}function H(t){var e=this;return t.likes.some((function(t){return t._id==h(e,g)}))}function G(){h(this,O).remove()}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}w=".place",(m="cardTypeSelector")in(b=B)?Object.defineProperty(b,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):b[m]=w;var Q=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItem",value:function(t){this.renderer(t)}},{key:"addItem",value:function(t){this.container.prepend(t)}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e){var n=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,n)}var Z=new WeakMap,tt=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}(this,Z,{writable:!0,value:function(t){"Escape"===t.key&&n.close()}}),this.popup=document.querySelector(e),this.buttonClose=this.popup.querySelector(".popup__icon-close")}var e,n;return e=t,(n=[{key:"open",value:function(){this.popup.classList.add("popup_opened"),document.addEventListener("keydown",Y(this,Z))}},{key:"close",value:function(){this.popup.classList.remove("popup_opened"),document.removeEventListener("keydown",Y(this,Z))}},{key:"setEventListeners",value:function(){var t=this;this.buttonClose.addEventListener("click",(function(){t.close()})),this.popup.addEventListener("click",(function(e){e.target.classList.contains("popup_opened")&&t.close()}))}}])&&X(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(){return ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=it(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ot.apply(this,arguments)}function it(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ut(t)););return t}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},at(t,e)}function ct(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return st(t)}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ut(t)}var lt=new WeakSet,ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&at(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ut(r);if(o){var n=ut(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ct(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}(st(n=i.call(this,t)),lt),n.submitForm=e,n.form=n.popup.querySelector(".form"),n.inputList=n.form.querySelectorAll(".form__item"),n.buttonSubmit=n.popup.querySelector(".form__submit-button"),n}return e=a,(n=[{key:"close",value:function(){this.form.reset(),ot(ut(a.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){var t=this;ot(ut(a.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",(function(e){e.preventDefault(),t.buttonSubmit.textContent="Сохранение...",t.submitForm(function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(t,lt,pt).call(t)).then((function(){t.close()})).catch((function(t){console.log(t)})).finally((function(){t.buttonSubmit.textContent="Сохранение"}))}))}}])&&rt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(tt);function pt(){var t,e={},n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this.inputList);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r.value}}catch(t){n.e(t)}finally{n.f()}return e}function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dt(){return dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=vt(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},dt.apply(this,arguments)}function vt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wt(t)););return t}function bt(t,e){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bt(t,e)}function mt(t,e){if(e&&("object"===ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wt(r);if(o){var n=wt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return mt(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).popupImage=e.popup.querySelector(".popup__image"),e.popupSubtitle=e.popup.querySelector(".popup__subtitle"),e}return e=a,(n=[{key:"open",value:function(t,e){dt(wt(a.prototype),"open",this).call(this),this.popupImage.src=t,this.popupImage.alt=e,this.popupSubtitle.textContent=e}}])&&yt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(tt);function St(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return _t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ot(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Et(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var jt=new WeakSet,Ct=new WeakSet,Pt=new WeakSet,Lt=new WeakSet,Tt=new WeakSet,qt=new WeakSet,It=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ot(this,qt),Ot(this,Tt),Ot(this,Lt),Ot(this,Pt),Ot(this,Ct),Ot(this,jt),this.validationOptions=e,this.form=n,this.inputList=Array.from(this.form.querySelectorAll(e.inputSelector)),this.buttonSubmit=this.form.querySelector(e.submitButtonSelector)}var e,n;return e=t,(n=[{key:"clearError",value:function(){var t,e=St(this.inputList);try{for(e.s();!(t=e.n()).done;){var n=t.value;Et(this,Ct,At).call(this,n)}}catch(t){e.e(t)}finally{e.f()}Et(this,Tt,Rt).call(this)}},{key:"enableValidation",value:function(){Et(this,qt,Mt).call(this)}}])&&kt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wt(t,e){var n=this.form.querySelector(".".concat(t.id,"-error"));t.classList.add(this.validationOptions.inputErrorClass),n.textContent=e,n.classList.add(this.validationOptions.errorClass)}function At(t){var e=this.form.querySelector(".".concat(t.id,"-error"));t.classList.remove(this.validationOptions.inputErrorClass),e.classList.remove(this.validationOptions.errorClass),e.textContent=""}function Ut(){return this.inputList.some((function(t){return!t.validity.valid}))}function xt(t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?Et(this,Ct,At).call(this,t):Et(this,jt,Wt).call(this,t,t.validationMessage)}function Rt(){Et(this,Pt,Ut).call(this)?(this.buttonSubmit.disabled=!0,this.buttonSubmit.classList.add(this.validationOptions.inactiveButtonClass)):(this.buttonSubmit.disabled=!1,this.buttonSubmit.classList.remove(this.validationOptions.inactiveButtonClass))}function Mt(){var t=this;Et(this,Tt,Rt).call(this);var e,n=St(this.inputList);try{var r=function(){var n=e.value;n.addEventListener("input",(function(){Et(t,Lt,xt).call(t,n),Et(t,Tt,Rt).call(t)}))};for(n.s();!(e=n.n()).done;)r()}catch(t){n.e(t)}finally{n.f()}}function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Dt=function(){function t(e){var n=e.name,r=e.bio,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=document.querySelector(n),this.bio=document.querySelector(r),this.avatar=document.querySelector(o)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this.name.textContent,bio:this.bio.textContent}}},{key:"setUserInfo",value:function(t,e){this.name.textContent=t,this.bio.textContent=e}},{key:"setUserAvatar",value:function(t){this.avatar.src=t}}])&&Bt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Vt=new o({baseUrl:"https://mesto.nomoreparties.co/v1/plus-cohort-16",headers:{authorization:"3b45e7df-7420-41ed-89ad-84bab9964bf8","Content-Type":"application/json"}}),Jt={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__item_type_error",errorClass:"form__item-error_active"},$t=new Q((function(t){var e=new B(t,"#place-template",(function(){Qt.open(t.link,t.name)}));$t.addItem(e.create())}),".places"),Ft=new Dt({name:".profile__name",bio:".profile__bio",avatar:".profile__userpic"}),Ht=new ft(".popup_el_profile",(function(t){var e=t.username,n=t.about;return Vt.pushProfileUpdate(e,n).then((function(t){Ft.setUserInfo(t.name,t.about)}))})),Gt=new ft(".popup_el_place",(function(t){var e=t.placename,n=t.placelink;return Vt.pushNewPlaceCard(e,n).then((function(t){$t.renderItem(t)}))})),Kt=new ft(".popup_el_user-pic",(function(t){var e=t.avatar;return Vt.updateUserPic(e).then((function(t){Ft.setUserAvatar(t.avatar)}))})),Qt=new gt(".popup_el_image"),Xt=new It(Jt,a.querySelector(".popup_el_profile .form")),Yt=new It(Jt,a.querySelector(".popup_el_place .form")),Zt=new It(Jt,a.querySelector(".popup_el_user-pic .form")),te=a.querySelector(".profile__edit-userpic");Xt.enableValidation(),Yt.enableValidation(),Zt.enableValidation(),Ht.setEventListeners(),Gt.setEventListeners(),Kt.setEventListeners(),Qt.setEventListeners(),c.addEventListener("click",(function(){var t=zt(Ht.inputList,2),e=t[0],n=t[1],r=Ft.getUserInfo(),o=r.name,i=r.bio;e.value=o,n.value=i,Xt.clearError(),Ht.open()})),s.addEventListener("click",(function(){Yt.clearError(),Gt.open()})),te.addEventListener("click",(function(){Zt.clearError(),Kt.open()})),Promise.all([Vt.getProfile(),Vt.getInitialCards()]).then((function(t){var e=zt(t,2),n=e[0],r=e[1];sessionStorage.setItem("userId",n._id),Ft.setUserInfo(n.name,n.about),Ft.setUserAvatar(n.avatar),r.forEach((function(t){$t.renderItem(t)}))})).catch((function(t){console.log(t)}))})();